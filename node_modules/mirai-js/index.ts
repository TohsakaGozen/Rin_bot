// import { MiraiService } from './src/MiraiService';
import { Bot } from './src'
import WebSocket from 'ws'
import { Middleware } from './src/Middleware';
(async () => {
    // const adapter = new WebSocketAdapter('ws://localhost:8080/message?verifyKey=INITKEYpff86IGV&qq=3070539027')

    // await adapter.verify()
    // console.log(await adapter.sendCommand({
    // command: 'sendGroupMessage',
    // content: {
    // target: '730757181',
    // messageChain: [{ type: 'Plain', text: 'hello' }]
    // }
    // }))
    // console.log(adapter.sessionKey)
    const bot = Bot.create({
        url: 'ws://localhost:8080',
        verifyKey: 'INITKEYpff86IGV',
        qq: 3070539027,
        version: '2.6.0',
    })


    const msid = await bot.sendMessage({
        qq: 1019933576,
        message: 'hello',
    });
    bot.on('FriendMessage', data => {
        console.log(data)
    })
    bot.on('GroupMessage', new Middleware()
        .textProcessor()
        .use(async (ctx, next) => {
            ctx.
        }))

})()