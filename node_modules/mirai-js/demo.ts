import { Bot, Message, Middleware } from './src';

(async () => {
    try {
        const baseUrl = 'http://localhost:8080';
        const verifyKey = 'INITKEYpff86IGV';
        const qq = 3070539027;
        const bot = new Bot();

        // 在 mirai-console 登录你的 bot

        // 创建一个会话
        await bot.open({
            // mirai-api-http 的服务端地址，
            baseUrl,
            // 要绑定的 qq，须确保该用户已在 mirai-console 登录
            qq,
            // verifyKey 用于验证连接者的身份，在插件配置文件中设置
            verifyKey,
        });

        bot.sendMessage({
            friend: 1019933576,
            message: new Message().addVoiceId(await (await bot.uploadVoice({ filename: './1.mp3' }))?.path),
        })
    } catch (err) {
        console.log(err);
    }
})();